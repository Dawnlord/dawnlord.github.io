<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8"></meta>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
	<link rel="stylesheet" type="text/css" href="./style.css">
	<link rel="shortcut icon" href="./logo.ico" type="image/x-icon">
	<title>2467算号器</title></head>
	<body bgcolor="#C0C0C0">
		<div style="border:none;position:relative;margin:0 auto;width: 500px;height: 1000px;">
			<img src= "./GBack.png" style="max-width:100%;top:50%;left:50%;margin-top:-500px;margin-left:-250px;position:absolute;z-index:1;" id="bk"></img>
			<img src= "./logo1.png" style="width:215px;height:110px;top:50%;left:50%;margin-top:-450px;margin-left:-100px;position:absolute;z-index:2;"></img>
			<label><input class="mui-switch mui-switch-anim" type="checkbox" id="switch"></label>
			<div style="color:#FFFFFF;border:none;padding:10px;top:0%;left:0;margin-top:50px;margin-left:20px;position:absolute;z-index:3;font-size: 15px;" id="switchText"><strong>切为Decade</strong></div>
			<div style="color:#FFFFFF;border:none;padding:10px;top:50%;right:0;margin-top:-490px;margin-right:25px;position:absolute;z-index:3;font-size: 15px;"><strong>B站/闲鱼id: 二四柳七</strong></div>
			<div style="color:#FFFFFF;border:none;padding:10px;top:50%;left:50%;margin-top:-350px;margin-left:-130px;position:absolute;z-index:3;font-size: 50px;"><strong><font face="幼圆">2467算号器</font face="幼圆"></strong></div>
			<input type="number" name="code" placeholder="00000" style="width:100px;height:30px;border-radius: 10px;background-color: rgba(255, 255, 255, 0.5);border: none;padding: 10px;font-size: 25px;top:50%;left:50%;margin-top:-250px;margin-left:-50px;position:absolute;z-index:4;">
			<button name="switch"type="button" class="btn" style="margin-top:-100px;">←编号转条码</button>
			<button id="CTN"type="button" class="btn" style="margin-top:-180px;">→条码转编号</button>
			<button id="NTC"type="button" class="btn" style="margin-top:-100px;">←编号转条码</button>
			<table cellspacing="0" width="34" style="margin-left:0px;margin-top:425px;position:absolute;z-index:5;"><tbody>
	            <tr height="17">
	                <td bgcolor="#FFFFFF"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#000000"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#FFFFFF"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#000000"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#FFFFFF"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#000000"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#FFFFFF"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#000000"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#FFFFFF"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#000000"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#FFFFFF"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#000000"></td>
	            </tr>
	            <tr height="17">
	                <td bgcolor="#FFFFFF"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:black;"></td>
	            </tr>
	        </tbody>
		    </table>
			<table cellspacing="0" width="33" style="margin-left:34px;margin-top:433.5px;position:absolute;z-index:5;"><tbody>
	            <tr height="17">
	                <td style="background-color:black;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:white;"></td>
	            </tr>
	            <tr height="17">
	                <td style="background-color:black;"></td>
	            </tr>
	        </tbody>
		    </table>
		</div>
	    
	    <script type="text/javascript">
	   	var tds=document.querySelectorAll("td") //获取td元素
	   	var ctnBtn = document.getElementById("CTN");
	   	var ntcBtn = document.getElementById("NTC");
	   	var inputBox = document.getElementsByName("code")[0];
	   	var bkImg = document.getElementById("bk");
	   	var mode = 0;

	   	for (var i = 14; i < tds.length; i++) {
	   		if(i < tds.length - 2) {
	   			tds[i].onclick = function(){
		   			if(this.style.backgroundColor == "white") 
		   				this.style.backgroundColor = "black";	
		   			else
		   				this.style.backgroundColor = "white";
		   		}	
	   		} else {
	   			tds[i].onclick = function(){
	   				if(mode == 0){
			   			if(this.style.backgroundColor == "white") 
			   				this.style.backgroundColor = "black";	
			   			else
			   				this.style.backgroundColor = "white";
		   			}
		   		}
	   		}  
		}

		ctnBtn.onclick = function() {
			var totalCount = 0;
			if(mode == 0) {
				for (var i = 14; i < tds.length; i++) {
					var j = i - 14;
					var cur = Math.pow(2, j);
		   			if(tds[i].style.backgroundColor == "black") 
		   				totalCount += cur;   
				}				
			} else {
				for (var i = 14; i < tds.length - 2; i++) {
					var j = i - 14;
					var cur = Math.pow(2, j);
		   			if(tds[i].style.backgroundColor == "black") 
		   				totalCount += cur;   
				}	
			}
			inputBox.value = totalCount;
		}
		ntcBtn.onclick = function () {
			console.log("点击数字转条码");
			var number = new Number(inputBox.value);
			if((mode == 0 && number <= 16383) || (mode == 1 && number <= 4095)) {
				var code = number.toString(2);
				console.log(code);
				for (var i = 14; i < tds.length; i++) {
		   			tds[i].style.backgroundColor = "white"; 
				}
				for (var j = code.length - 1; j >= 0; j--) {
					if(code[j] == '1')
						tds[code.length -1 - j + 14].style.backgroundColor = "black";
				}
			} else {
				alert("超出范围！");
			}
		};
		document.getElementById("switch").onclick = function () {
			if(this.checked) {
				mode = 1;
				bkImg.src = "./DBack.png";
				tds[13].style.backgroundColor = "white";
				tds[26].style.backgroundColor = "white";
				tds[27].style.backgroundColor = "white";
				document.getElementById("switchText").innerHTML = "切为Gotchard";
			} else {
				mode = 0;
				bkImg.src = "./GBack.png";
				tds[13].style.backgroundColor = "black";
				tds[26].style.backgroundColor = "white";
				tds[27].style.backgroundColor = "black";
				document.getElementById("switchText").innerHTML = "切为Decade";
			}          
	    };
		</script>
</body>
</html>